import{c as w}from"./component-GWnuE1KC.js";import{r as a}from"./index-4g5l5LRQ.js";import{c as A}from"./index-PzP5oypK.js";import{_ as g}from"./extends-dGVwEr9R.js";import{$ as E,b as P,a as h}from"./index-uUL8xeMH.js";import{$ as b}from"./index-OvZZPJzn.js";import{c as y}from"./color.prop-2NeWmXkP.js";import{h as N}from"./high-contrast.prop-QxvwxEM2.js";import{r as M}from"./radius.prop-eqdedovG.js";import{e as R,w as I,a as k}from"./margin.props-PzJgsS8k.js";const S="Avatar",[z,oa]=E(S),[F,x]=z(S),T=a.forwardRef((t,n)=>{const{__scopeAvatar:r,...e}=t,[o,s]=a.useState("idle");return a.createElement(F,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:s},a.createElement(b.span,g({},e,{ref:n})))}),B="AvatarImage",q=a.forwardRef((t,n)=>{const{__scopeAvatar:r,src:e,onLoadingStatusChange:o=()=>{},...s}=t,d=x(B,r),c=K(e),i=P(u=>{o(u),d.onImageLoadingStatusChange(u)});return h(()=>{c!=="idle"&&i(c)},[c,i]),c==="loaded"?a.createElement(b.img,g({},s,{ref:n,src:e})):null}),D="AvatarFallback",G=a.forwardRef((t,n)=>{const{__scopeAvatar:r,delayMs:e,...o}=t,s=x(D,r),[d,c]=a.useState(e===void 0);return a.useEffect(()=>{if(e!==void 0){const i=window.setTimeout(()=>c(!0),e);return()=>window.clearTimeout(i)}},[e]),d&&s.imageLoadingStatus!=="loaded"?a.createElement(b.span,g({},o,{ref:n})):null});function K(t){const[n,r]=a.useState("idle");return h(()=>{if(!t){r("error");return}let e=!0;const o=new window.Image,s=d=>()=>{e&&r(d)};return r("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=t,()=>{e=!1}},[t]),n}const V=T,j=q,H=G,J=["1","2","3","4","5","6","7","8","9"],O=["solid","soft"],f={size:{type:"enum",values:J,default:"3",responsive:!0},variant:{type:"enum",values:O,default:"soft"},color:{...y,default:void 0},highContrast:N,radius:M,fallback:{type:"ReactNode",default:void 0,required:!0}},_=a.forwardRef((t,n)=>{const{rest:r,...e}=R(t),{className:o,style:s,size:d=f.size.default,variant:c=f.variant.default,color:i=f.color.default,highContrast:u=f.highContrast.default,radius:C=f.radius.default,fallback:l,...m}=r,[$,L]=a.useState("idle");return a.createElement(V,{"data-accent-color":i,"data-radius":C,className:A("rt-AvatarRoot",o,I(d,"rt-r-size"),`rt-variant-${c}`,{"rt-high-contrast":u},k(e)),style:s},$==="idle"||$==="loading"?a.createElement("span",{className:"rt-AvatarFallback"}):null,$==="error"?a.createElement(H,{className:A("rt-AvatarFallback",{"rt-one-letter":typeof l=="string"&&l.length===1,"rt-two-letters":typeof l=="string"&&l.length===2}),delayMs:0},l):null,a.createElement(j,{ref:n,className:"rt-AvatarImage",...m,onLoadingStatusChange:v=>{var p;(p=m.onLoadingStatusChange)===null||p===void 0||p.call(m,v),L(v)}}))});_.displayName="Avatar";const sa=w({id:"Avatar",baseElement:_,defaultProps:{radius:"full"}});export{sa as A};
