import{e as Q,c as X,a as Z}from"./component-GWnuE1KC.js";import{R as T,r as E}from"./index-4g5l5LRQ.js";const w=typeof document<"u"?T.useLayoutEffect:()=>{};let O=new Map;function ee(e,t){if(e===t)return e;let n=O.get(e);if(n)return n(t),t;let o=O.get(t);return o?(o(e),e):t}function te(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const h=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},ne=e=>e&&"window"in e&&e.window===e?e:h(e).defaultView||window;function re(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let o=e[n];for(let r in o){let i=t[r],l=o[r];typeof i=="function"&&typeof l=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?t[r]=te(i,l):(r==="className"||r==="UNSAFE_className")&&typeof i=="string"&&typeof l=="string"?t[r]=Q(i,l):r==="id"&&i&&l?t.id=ee(i,l):t[r]=l!==void 0?l:i}}return t}function B(e){if(oe())e.focus({preventScroll:!0});else{let t=ie(e);e.focus(),ae(t)}}let _=null;function oe(){if(_==null){_=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return _=!0,!0}})}catch{}}return _}function ie(e){for(var t=e.parentNode,n=[],o=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==o;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return o instanceof HTMLElement&&n.push({element:o,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft}),n}function ae(e){for(let{element:t,scrollTop:n,scrollLeft:o}of e)t.scrollTop=n,t.scrollLeft=o}function le(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function ue(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function ce(){return ue(/^Mac/i)}function de(){return le(/Android/i)}let S=new Map,M=new Set;function U(){if(typeof window>"u")return;let e=n=>{let o=S.get(n.target);o||(o=new Set,S.set(n.target,o),n.target.addEventListener("transitioncancel",t)),o.add(n.propertyName)},t=n=>{let o=S.get(n.target);if(o&&(o.delete(n.propertyName),o.size===0&&(n.target.removeEventListener("transitioncancel",t),S.delete(n.target)),S.size===0)){for(let r of M)r();M.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?U():document.addEventListener("DOMContentLoaded",U));function fe(e){requestAnimationFrame(()=>{S.size===0?e():M.add(e)})}function se(e){return e.mozInputSource===0&&e.isTrusted?!0:de()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}const ve=T.createContext({register:()=>{}});ve.displayName="PressResponderContext";let F=null,be=new Set,W=!1,L=!1,D=!1;function H(e,t){for(let n of be)n(e,t)}function pe(e){return!(e.metaKey||!ce()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function j(e){L=!0,pe(e)&&(F="keyboard",H("keyboard",e))}function x(e){F="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(L=!0,H("pointer",e))}function $e(e){se(e)&&(L=!0,F="virtual")}function me(e){e.target===window||e.target===document||(!L&&!D&&(F="virtual",H("virtual",e)),L=!1,D=!1)}function Ee(){L=!1,D=!0}function G(){if(typeof window>"u"||W)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){L=!0,e.apply(this,arguments)},document.addEventListener("keydown",j,!0),document.addEventListener("keyup",j,!0),document.addEventListener("click",$e,!0),window.addEventListener("focus",me,!0),window.addEventListener("blur",Ee,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",x,!0),document.addEventListener("pointermove",x,!0),document.addEventListener("pointerup",x,!0)):(document.addEventListener("mousedown",x,!0),document.addEventListener("mousemove",x,!0),document.addEventListener("mouseup",x,!0)),W=!0}typeof document<"u"&&(document.readyState!=="loading"?G():document.addEventListener("DOMContentLoaded",G));function he(){return F}function we(e){const t=h(e);if(he()==="virtual"){let n=t.activeElement;fe(()=>{t.activeElement===n&&e.isConnected&&B(e)})}else B(e)}function ye(e){const t=ne(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:o}=e.style,r=n!=="none"&&o!=="hidden"&&o!=="collapse";if(r){const{getComputedStyle:i}=e.ownerDocument.defaultView;let{display:l,visibility:a}=i(e);r=l!=="none"&&a!=="hidden"&&a!=="collapse"}return r}function Ne(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function q(e,t){return e.nodeName!=="#comment"&&ye(e)&&Ne(e,t)&&(!e.parentElement||q(e.parentElement,e))}const K=T.createContext(null);let f=null;function J(e){let{children:t,contain:n,restoreFocus:o,autoFocus:r}=e,i=E.useRef(null),l=E.useRef(null),a=E.useRef([]),{parentNode:p}=E.useContext(K)||{},u=E.useMemo(()=>new I({scopeRef:a}),[a]);w(()=>{let v=p||b.root;if(b.getTreeNode(v.scopeRef)&&f&&!R(f,v.scopeRef)){let s=b.getTreeNode(f);s&&(v=s)}v.addChild(u),b.addNode(u)},[u,p]),w(()=>{let v=b.getTreeNode(a);v&&(v.contain=!!n)},[n]),w(()=>{var v;let s=(v=i.current)===null||v===void 0?void 0:v.nextSibling,m=[];for(;s&&s!==l.current;)m.push(s),s=s.nextSibling;a.current=m},[t]),Fe(a,o,n),Se(a,n),Re(a,o,n),Ce(a,r),E.useEffect(()=>{const v=h(a.current?a.current[0]:void 0).activeElement;let s=null;if($(v,a.current)){for(let m of b.traverse())m.scopeRef&&$(v,m.scopeRef.current)&&(s=m);s===b.getTreeNode(a)&&(f=s.scopeRef)}},[a]),w(()=>()=>{var v,s,m;let A=(m=(s=b.getTreeNode(a))===null||s===void 0||(v=s.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&m!==void 0?m:null;(a===f||R(a,f))&&(!A||b.getTreeNode(A))&&(f=A),b.removeTreeNode(a)},[a]);let c=E.useMemo(()=>Te(a),[]),d=E.useMemo(()=>({focusManager:c,parentNode:u}),[u,c]);return T.createElement(K.Provider,{value:d},T.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),t,T.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:l}))}function ge(){var e;return(e=E.useContext(K))===null||e===void 0?void 0:e.focusManager}function Te(e){return{focusNext(t={}){let n=e.current,{from:o,tabbable:r,wrap:i,accept:l}=t,a=o||h(n[0]).activeElement,p=n[0].previousElementSibling,u=g(n),c=N(u,{tabbable:r,accept:l},n);c.currentNode=$(a,n)?a:p;let d=c.nextNode();return!d&&i&&(c.currentNode=p,d=c.nextNode()),d&&y(d,!0),d},focusPrevious(t={}){let n=e.current,{from:o,tabbable:r,wrap:i,accept:l}=t,a=o||h(n[0]).activeElement,p=n[n.length-1].nextElementSibling,u=g(n),c=N(u,{tabbable:r,accept:l},n);c.currentNode=$(a,n)?a:p;let d=c.previousNode();return!d&&i&&(c.currentNode=p,d=c.previousNode()),d&&y(d,!0),d},focusFirst(t={}){let n=e.current,{tabbable:o,accept:r}=t,i=g(n),l=N(i,{tabbable:o,accept:r},n);l.currentNode=n[0].previousElementSibling;let a=l.nextNode();return a&&y(a,!0),a},focusLast(t={}){let n=e.current,{tabbable:o,accept:r}=t,i=g(n),l=N(i,{tabbable:o,accept:r},n);l.currentNode=n[n.length-1].nextElementSibling;let a=l.previousNode();return a&&y(a,!0),a}}}const z=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],Le=z.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";z.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const xe=z.join(':not([hidden]):not([tabindex="-1"]),');function g(e){return e[0].parentElement}function C(e){let t=b.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function Se(e,t){let n=E.useRef(),o=E.useRef();w(()=>{let r=e.current;if(!t){o.current&&(cancelAnimationFrame(o.current),o.current=void 0);return}const i=h(r?r[0]:void 0);let l=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!C(e))return;let c=i.activeElement,d=e.current;if(!d||!$(c,d))return;let v=g(d),s=N(v,{tabbable:!0},d);if(!c)return;s.currentNode=c;let m=u.shiftKey?s.previousNode():s.nextNode();m||(s.currentNode=u.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,m=u.shiftKey?s.previousNode():s.nextNode()),u.preventDefault(),m&&y(m,!0)},a=u=>{(!f||R(f,e))&&$(u.target,e.current)?(f=e,n.current=u.target):C(e)&&!P(u.target,e)?n.current?n.current.focus():f&&f.current&&k(f.current):C(e)&&(n.current=u.target)},p=u=>{o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.activeElement&&C(e)&&!P(i.activeElement,e))if(f=e,i.body.contains(u.target)){var c;n.current=u.target,(c=n.current)===null||c===void 0||c.focus()}else f.current&&k(f.current)})};return i.addEventListener("keydown",l,!1),i.addEventListener("focusin",a,!1),r==null||r.forEach(u=>u.addEventListener("focusin",a,!1)),r==null||r.forEach(u=>u.addEventListener("focusout",p,!1)),()=>{i.removeEventListener("keydown",l,!1),i.removeEventListener("focusin",a,!1),r==null||r.forEach(u=>u.removeEventListener("focusin",a,!1)),r==null||r.forEach(u=>u.removeEventListener("focusout",p,!1))}},[e,t]),w(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[o])}function Y(e){return P(e)}function $(e,t){return!e||!t?!1:t.some(n=>n.contains(e))}function P(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of b.traverse(b.getTreeNode(t)))if(n&&$(e,n.current))return!0;return!1}function R(e,t){var n;let o=(n=b.getTreeNode(t))===null||n===void 0?void 0:n.parent;for(;o;){if(o.scopeRef===e)return!0;o=o.parent}return!1}function y(e,t=!1){if(e!=null&&!t)try{we(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function k(e,t=!0){let n=e[0].previousElementSibling,o=g(e),r=N(o,{tabbable:t},e);r.currentNode=n;let i=r.nextNode();t&&!i&&(o=g(e),r=N(o,{tabbable:!1},e),r.currentNode=n,i=r.nextNode()),y(i)}function Ce(e,t){const n=T.useRef(t);E.useEffect(()=>{if(n.current){f=e;const o=h(e.current?e.current[0]:void 0);!$(o.activeElement,f.current)&&e.current&&k(e.current)}n.current=!1},[e])}function Fe(e,t,n){w(()=>{if(t||n)return;let o=e.current;const r=h(o?o[0]:void 0);let i=l=>{let a=l.target;$(a,e.current)?f=e:Y(a)||(f=null)};return r.addEventListener("focusin",i,!1),o==null||o.forEach(l=>l.addEventListener("focusin",i,!1)),()=>{r.removeEventListener("focusin",i,!1),o==null||o.forEach(l=>l.removeEventListener("focusin",i,!1))}},[e,t,n])}function _e(e){let t=b.getTreeNode(f);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function Re(e,t,n){const o=E.useRef(typeof document<"u"?h(e.current?e.current[0]:void 0).activeElement:null);w(()=>{let r=e.current;const i=h(r?r[0]:void 0);if(!t||n)return;let l=()=>{(!f||R(f,e))&&$(i.activeElement,e.current)&&(f=e)};return i.addEventListener("focusin",l,!1),r==null||r.forEach(a=>a.addEventListener("focusin",l,!1)),()=>{i.removeEventListener("focusin",l,!1),r==null||r.forEach(a=>a.removeEventListener("focusin",l,!1))}},[e,n]),w(()=>{const r=h(e.current?e.current[0]:void 0);if(!t)return;let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!C(e))return;let a=r.activeElement;if(!$(a,e.current))return;let p=b.getTreeNode(e);if(!p)return;let u=p.nodeToRestore,c=N(r.body,{tabbable:!0});c.currentNode=a;let d=l.shiftKey?c.previousNode():c.nextNode();if((!u||!r.body.contains(u)||u===r.body)&&(u=void 0,p.nodeToRestore=void 0),(!d||!$(d,e.current))&&u){c.currentNode=u;do d=l.shiftKey?c.previousNode():c.nextNode();while($(d,e.current));l.preventDefault(),l.stopPropagation(),d?y(d,!0):Y(u)?y(u,!0):a.blur()}};return n||r.addEventListener("keydown",i,!0),()=>{n||r.removeEventListener("keydown",i,!0)}},[e,t,n]),w(()=>{const r=h(e.current?e.current[0]:void 0);if(!t)return;let i=b.getTreeNode(e);if(i){var l;return i.nodeToRestore=(l=o.current)!==null&&l!==void 0?l:void 0,()=>{let a=b.getTreeNode(e);if(!a)return;let p=a.nodeToRestore;if(t&&p&&($(r.activeElement,e.current)||r.activeElement===r.body&&_e(e))){let u=b.clone();requestAnimationFrame(()=>{if(r.activeElement===r.body){let c=u.getTreeNode(e);for(;c;){if(c.nodeToRestore&&c.nodeToRestore.isConnected){y(c.nodeToRestore);return}c=c.parent}for(c=u.getTreeNode(e);c;){if(c.scopeRef&&c.scopeRef.current&&b.getTreeNode(c.scopeRef)){k(c.scopeRef.current,!0);return}c=c.parent}}})}}}},[e,t])}function N(e,t,n){let o=t!=null&&t.tabbable?xe:Le,r=h(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var l;return!(t==null||(l=t.from)===null||l===void 0)&&l.contains(i)?NodeFilter.FILTER_REJECT:i.matches(o)&&q(i)&&(!n||$(i,n))&&(!(t!=null&&t.accept)||t.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(r.currentNode=t.from),r}class V{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,n,o){let r=this.fastMap.get(n??null);if(!r)return;let i=new I({scopeRef:t});r.addChild(i),i.parent=r,this.fastMap.set(t,i),o&&(i.nodeToRestore=o)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let n=this.fastMap.get(t);if(!n)return;let o=n.parent;for(let i of this.traverse())i!==n&&n.nodeToRestore&&i.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&$(i.nodeToRestore,n.scopeRef.current)&&(i.nodeToRestore=n.nodeToRestore);let r=n.children;o&&(o.removeChild(n),r.size>0&&r.forEach(i=>o&&o.addChild(i))),this.fastMap.delete(n.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let n of t.children)yield*this.traverse(n)}clone(){var t;let n=new V;var o;for(let r of this.traverse())n.addTreeNode(r.scopeRef,(o=(t=r.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&o!==void 0?o:null,r.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new I({scopeRef:null}),this.fastMap.set(null,this.root)}}class I{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let b=new V;function ke(){const e=ge();return{onKeyDown:n=>{n.key==="ArrowRight"&&(e==null||e.focusNext()),n.key==="ArrowLeft"&&(e==null||e.focusPrevious()),n.key==="ArrowUp"&&(e==null||e.focusNext()),n.key==="ArrowDown"&&(e==null||e.focusPrevious())}}}function Ae(e){return typeof e!="boolean"&&typeof e!="string"&&typeof e<"u"&&typeof e!="number"}const Me=X({id:"FocusArrowNavigator",render:(e,{children:t,...n})=>{const{onKeyDown:o}=ke();if(Ae(t)){const r=E.Children.map(t,i=>E.cloneElement(i,re(i.props,{onKeyDown:o})));return Z(J,{...n,children:r})}throw new Error("Children type not accepted")}}),Pe={ArrowNavigator:Me,Scope:J};export{re as $,Pe as F};
